<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Flozen by MR.10 | Premium Online Shopping</title>
  <meta name="description" content="Flozen by MR.10 â€” Premium gadgets, streetwear & lifestyle drops. Fast shipping, authentic products.">
  <meta property="og:title" content="Flozen by MR.10 | Premium Online Shopping">
  <meta property="og:description" content="Handpicked limited drops â€” gadgets, streetwear & lifestyle. Trusted worldwide.">
  <meta property="og:image" content="https://images.unsplash.com/photo-1620760460330-0164c4149021?q=80&w=2070&auto=format&fit=crop">
  <meta name="twitter:card" content="summary_large_image">
  <style>
    .skip-link { position: absolute; left: -999px; top: -999px; background: #000; color: #fff; padding: 8px 12px; z-index: 99999; }
    .skip-link:focus { left: 12px; top: 12px; border-radius: 6px; }
  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="image" href="https://images.unsplash.com/photo-1620760460330-0164c4149021?q=80&w=2070&auto=format&fit=crop">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              dark: '#050505',
              gray: '#1a1a1a',
              accent: '#FF3366',
              blue: '#00C2FF',
              purple: '#7000FF',
              aqua: '#35C5F0',
              violet: '#7A5CFF',
              gold: '#FFD700',
              rose: '#FF6B9D',
              emerald: '#10B981',
              orange: '#FF6B35'
            }
          },
          fontFamily: {
            sans: ['Outfit','sans-serif'],
            serif: ['Playfair Display','serif'],
          }
        }
      }
    }
  </script>
  <style>
    :root{
      --bg-start:#050505;
      --bg-end:#050505;
      --card-bg: rgba(12,12,18,0.95);
      --muted:#9aa0b2;
      --accent:#FF3366;
      --aqua:#00C2FF;
      --violet:#7000FF;
      --gold:#FFD700;
      --rose:#FF6B9D;
      --emerald:#10B981;
      --glass: rgba(255,255,255,0.04);
      --glass-border: rgba(255,255,255,0.1);
      --success:#2ecc71;
      --danger:#e74c3c;
    }
    *{box-sizing:border-box;}
    html{scroll-behavior:smooth;}
    body{
      background: linear-gradient(180deg, #0a0a12 0%, #050508 50%, #000 100%);
      color:#f5f5f5;
      font-family:Outfit,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      min-height:100vh;
      overflow-x:hidden;
    }
    :focus{outline: 2px solid rgba(255,51,102,0.7); outline-offset: 2px;}
    ::selection{background:var(--accent);color:#fff;}
    ::-webkit-scrollbar{width:10px;height:10px;}
    ::-webkit-scrollbar-track{background:#0a0a0a;}
    ::-webkit-scrollbar-thumb{background:linear-gradient(180deg,var(--accent),var(--violet));border-radius:10px;}
    ::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,var(--aqua),var(--accent));}

    .hero-bg-animated{
      position:absolute;inset:0;
      background: 
        radial-gradient(ellipse 80% 50% at 50% -20%, rgba(112,0,255,0.3) 0%, transparent 50%),
        radial-gradient(ellipse 60% 40% at 80% 60%, rgba(255,51,102,0.2) 0%, transparent 50%),
        radial-gradient(ellipse 50% 30% at 20% 80%, rgba(0,194,255,0.15) 0%, transparent 50%);
      animation: bgPulse 8s ease-in-out infinite;
    }
    @keyframes bgPulse{
      0%,100%{opacity:0.6;transform:scale(1);}
      50%{opacity:1;transform:scale(1.05);}
    }

    .glass{
      background:rgba(255,255,255,0.03);
      backdrop-filter:blur(20px);
      -webkit-backdrop-filter:blur(20px);
      border:1px solid rgba(255,255,255,0.08);
    }
    .glass-card{
      background:var(--card-bg);
      backdrop-filter:blur(12px);
      box-shadow:0 25px 60px rgba(0,0,0,0.8),0 0 0 1px rgba(255,255,255,0.05);
      border:1px solid rgba(255,255,255,0.08);
    }
    .glass-strong{
      background:rgba(10,10,15,0.9);
      backdrop-filter:blur(30px);
      border:1px solid rgba(255,255,255,0.12);
    }

    nav{transition:all .4s cubic-bezier(0.4,0,0.2,1);}
    nav.scrolled{
      backdrop-filter:blur(20px);
      background:rgba(5,5,8,0.92);
      box-shadow:0 4px 30px rgba(0,0,0,0.5),0 1px 0 rgba(255,255,255,0.05);
    }

    .text-gradient{
      background:linear-gradient(135deg,var(--aqua) 0%,var(--accent) 50%,var(--violet) 100%);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }
    .text-gradient-gold{
      background:linear-gradient(135deg,#FFD700 0%,#FFA500 50%,#FF6B35 100%);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    .text-gradient-emerald{
      background:linear-gradient(135deg,#10B981 0%,#00C2FF 100%);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }

    .product-card{
      position:relative;
      border-radius:24px;
      overflow:hidden;
      background:linear-gradient(145deg,rgba(15,15,22,0.98),rgba(8,8,12,0.98));
      border:1px solid rgba(255,255,255,0.06);
      transition:all .5s cubic-bezier(0.4,0,0.2,1);
      transform-style:preserve-3d;
      perspective:1000px;
    }
    .product-card::before{
      content:'';
      position:absolute;
      inset:-2px;
      background:linear-gradient(135deg,transparent 40%,var(--accent) 50%,var(--violet) 60%,transparent 70%);
      border-radius:26px;
      opacity:0;
      z-index:-1;
      transition:opacity .5s;
    }
    .product-card:hover{
      transform:translateY(-12px) rotateX(2deg);
      box-shadow:
        0 35px 80px rgba(0,0,0,0.9),
        0 0 60px rgba(255,51,102,0.15),
        0 0 100px rgba(112,0,255,0.1);
      border-color:rgba(255,255,255,0.15);
    }
    .product-card:hover::before{opacity:1;animation:borderRotate 3s linear infinite;}
    @keyframes borderRotate{
      from{transform:rotate(0deg);}
      to{transform:rotate(360deg);}
    }
    .product-card .card-image{
      position:relative;
      height:280px;
      overflow:hidden;
      background:linear-gradient(180deg,rgba(20,20,30,1),rgba(10,10,15,1));
    }
    .product-card .card-image img{
      width:100%;height:100%;
      object-fit:contain;
      padding:20px;
      transition:transform .7s cubic-bezier(0.4,0,0.2,1),filter .5s;
    }
    .product-card:hover .card-image img{
      transform:scale(1.1) translateY(-5px);
      filter:drop-shadow(0 20px 40px rgba(0,0,0,0.5));
    }
    .product-card .card-image::after{
      content:'';
      position:absolute;
      bottom:0;left:0;right:0;
      height:60%;
      background:linear-gradient(to top,rgba(10,10,15,1) 0%,transparent 100%);
      pointer-events:none;
    }

    .badge-hot{
      position:absolute;
      left:16px;top:16px;
      background:linear-gradient(135deg,#FF3366,#FF6B35);
      color:#fff;
      font-weight:800;
      border-radius:12px;
      padding:6px 14px;
      font-size:.7rem;
      letter-spacing:.1em;
      text-transform:uppercase;
      box-shadow:0 8px 25px rgba(255,51,102,0.5);
      animation:badgePulse 2s ease-in-out infinite;
      z-index:10;
    }
    .badge-new{
      background:linear-gradient(135deg,#10B981,#00C2FF);
      box-shadow:0 8px 25px rgba(16,185,129,0.5);
    }
    .badge-sale{
      background:linear-gradient(135deg,#FFD700,#FFA500);
      color:#000;
      box-shadow:0 8px 25px rgba(255,215,0,0.4);
    }
    @keyframes badgePulse{
      0%,100%{transform:scale(1);}
      50%{transform:scale(1.05);}
    }

    .wishlist-btn{
      position:absolute;
      top:16px;right:16px;
      width:44px;height:44px;
      background:rgba(0,0,0,0.6);
      backdrop-filter:blur(10px);
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:1.3rem;
      color:#fff;
      border:1px solid rgba(255,255,255,0.1);
      cursor:pointer;
      z-index:10;
      transition:all .3s cubic-bezier(0.4,0,0.2,1);
    }
    .wishlist-btn:hover{
      background:rgba(255,51,102,0.3);
      transform:scale(1.1);
      border-color:var(--accent);
    }
    .wishlist-btn.loved{
      color:var(--accent);
      background:rgba(255,51,102,0.2);
      animation:heartBeat .6s;
    }
    @keyframes heartBeat{
      0%{transform:scale(1);}
      25%{transform:scale(1.3);}
      50%{transform:scale(1);}
      75%{transform:scale(1.2);}
      100%{transform:scale(1);}
    }

    .quick-view-btn{
      position:absolute;
      bottom:20px;left:50%;
      transform:translateX(-50%) translateY(20px);
      opacity:0;
      background:rgba(255,255,255,0.95);
      color:#000;
      font-weight:700;
      padding:10px 24px;
      border-radius:30px;
      font-size:.8rem;
      letter-spacing:.05em;
      transition:all .4s cubic-bezier(0.4,0,0.2,1);
      z-index:10;
      box-shadow:0 10px 30px rgba(0,0,0,0.3);
    }
    .product-card:hover .quick-view-btn{
      opacity:1;
      transform:translateX(-50%) translateY(0);
    }
    .quick-view-btn:hover{
      background:var(--accent);
      color:#fff;
      transform:translateX(-50%) scale(1.05);
    }

    .btn-primary{
      background:linear-gradient(135deg,var(--accent) 0%,var(--violet) 100%);
      color:#fff;
      font-weight:700;
      border:none;
      border-radius:14px;
      padding:12px 24px;
      font-size:.85rem;
      letter-spacing:.03em;
      cursor:pointer;
      position:relative;
      overflow:hidden;
      transition:all .3s cubic-bezier(0.4,0,0.2,1);
      box-shadow:0 10px 30px rgba(255,51,102,0.3);
    }
    .btn-primary::before{
      content:'';
      position:absolute;
      top:0;left:-100%;
      width:100%;height:100%;
      background:linear-gradient(90deg,transparent,rgba(255,255,255,0.3),transparent);
      transition:left .5s;
    }
    .btn-primary:hover::before{left:100%;}
    .btn-primary:hover{
      transform:translateY(-3px);
      box-shadow:0 15px 40px rgba(255,51,102,0.4);
    }
    .btn-secondary{
      background:rgba(255,255,255,0.08);
      color:#fff;
      font-weight:600;
      border:1px solid rgba(255,255,255,0.15);
      border-radius:12px;
      padding:10px 20px;
      font-size:.8rem;
      cursor:pointer;
      transition:all .3s;
    }
    .btn-secondary:hover{
      background:rgba(255,255,255,0.15);
      border-color:rgba(255,255,255,0.3);
    }

    .stars{display:flex;gap:2px;align-items:center;}
    .star{width:16px;height:16px;color:#FFD700;filter:drop-shadow(0 0 3px rgba(255,215,0,0.5));}
    .star.empty{color:rgba(255,255,255,0.2);filter:none;}

    .price-tag{
      font-size:1.5rem;
      font-weight:800;
      background:linear-gradient(135deg,#fff,#ccc);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
    }
    .price-tag .currency{font-size:.9rem;font-weight:600;}
    .old-price{
      font-size:.9rem;
      color:#888;
      text-decoration:line-through;
      margin-left:8px;
    }

    .marquee-content{
      display:inline-block;
      animation:marqueeScroll 30s linear infinite;
    }
    @keyframes marqueeScroll{
      0%{transform:translateX(0);}
      100%{transform:translateX(-50%);}
    }

    .toast-wrap{
      position:fixed;
      right:20px;bottom:20px;
      z-index:99999;
      display:flex;
      flex-direction:column;
      gap:12px;
      pointer-events:none;
    }
    .toast{
      pointer-events:auto;
      padding:16px 24px;
      border-radius:16px;
      color:#fff;
      background:linear-gradient(135deg,rgba(20,20,30,0.98),rgba(10,10,15,0.98));
      backdrop-filter:blur(20px);
      border:1px solid rgba(255,255,255,0.1);
      box-shadow:0 20px 50px rgba(0,0,0,0.8);
      display:flex;
      gap:12px;
      align-items:center;
      max-width:380px;
      transform:translateX(100%);
      opacity:0;
      animation:toastIn .4s cubic-bezier(0.4,0,0.2,1) forwards;
    }
    .toast.success{border-left:4px solid var(--emerald);}
    .toast.warn{border-left:4px solid var(--gold);}
    .toast.error{border-left:4px solid var(--accent);}
    @keyframes toastIn{
      to{transform:translateX(0);opacity:1;}
    }

    .lightbox{
      position:fixed;inset:0;
      background:rgba(0,0,0,.97);
      display:flex;align-items:center;justify-content:center;
      z-index:99999;
      opacity:0;pointer-events:none;
      transition:opacity .4s cubic-bezier(0.4,0,0.2,1);
    }
    .lightbox.open{opacity:1;pointer-events:auto;}
    .lightbox img{
      max-width:90%;max-height:85vh;
      border-radius:20px;
      box-shadow:0 30px 80px rgba(0,0,0,0.9);
    }
    .lightbox .nav{
      position:absolute;top:50%;transform:translateY(-50%);
      font-size:2rem;color:#fff;cursor:pointer;
      width:50px;height:50px;
      display:flex;align-items:center;justify-content:center;
      border-radius:50%;
      background:rgba(255,255,255,0.1);
      backdrop-filter:blur(10px);
      border:1px solid rgba(255,255,255,0.2);
      transition:all .3s;
    }
    .lightbox .nav:hover{background:var(--accent);border-color:var(--accent);}
    .lightbox .nav.left{left:20px;}
    .lightbox .nav.right{right:20px;}

    .loader-overlay{background:#000;z-index:99999;}

    .reveal{
      opacity:0;
      transform:translateY(50px);
      transition:all .8s cubic-bezier(0.4,0,0.2,1);
    }
    .reveal.visible{opacity:1;transform:none;}
    .reveal-left{transform:translateX(-50px);}
    .reveal-right{transform:translateX(50px);}
    .reveal-scale{transform:scale(0.9);}

    .skeleton{
      background:linear-gradient(90deg,rgba(255,255,255,0.03) 25%,rgba(255,255,255,0.08) 50%,rgba(255,255,255,0.03) 75%);
      background-size:200% 100%;
      animation:shimmer 1.5s infinite;
    }
    @keyframes shimmer{
      0%{background-position:200% 0;}
      100%{background-position:-200% 0;}
    }

    .section-header{
      text-align:center;
      margin-bottom:4rem;
    }
    .section-title{
      font-size:clamp(2.5rem,6vw,4.5rem);
      font-weight:900;
      margin-bottom:1rem;
      line-height:1.1;
    }
    .section-subtitle{
      font-size:1.1rem;
      color:#888;
      max-width:600px;
      margin:0 auto;
    }

    .category-pill{
      padding:12px 28px;
      border-radius:50px;
      background:rgba(255,255,255,0.05);
      border:1px solid rgba(255,255,255,0.1);
      color:#fff;
      font-weight:600;
      font-size:.9rem;
      cursor:pointer;
      transition:all .3s cubic-bezier(0.4,0,0.2,1);
      white-space:nowrap;
    }
    .category-pill:hover,.category-pill.active{
      background:linear-gradient(135deg,var(--accent),var(--violet));
      border-color:transparent;
      box-shadow:0 10px 30px rgba(255,51,102,0.3);
      transform:translateY(-2px);
    }

    .flash-timer{
      display:flex;gap:8px;
    }
    .time-box{
      background:linear-gradient(135deg,rgba(255,51,102,0.2),rgba(112,0,255,0.2));
      border:1px solid rgba(255,51,102,0.3);
      border-radius:12px;
      padding:12px 16px;
      text-align:center;
      min-width:70px;
    }
    .time-box .num{
      font-size:1.8rem;
      font-weight:900;
      color:#fff;
      line-height:1;
    }
    .time-box .label{
      font-size:.65rem;
      color:#888;
      text-transform:uppercase;
      letter-spacing:.1em;
      margin-top:4px;
    }

    .recently-viewed-scroll{
      display:flex;
      gap:20px;
      overflow-x:auto;
      padding:20px 0;
      scroll-snap-type:x mandatory;
    }
    .recently-viewed-scroll::-webkit-scrollbar{height:6px;}
    .recently-viewed-item{
      flex:0 0 200px;
      scroll-snap-align:start;
    }

    .footer-bg{
      background:linear-gradient(180deg,rgba(10,10,15,1) 0%,rgba(5,5,8,1) 100%);
      border-top:1px solid rgba(255,255,255,0.05);
    }

    .cursor-dot,.cursor-outline{
      position:fixed;top:0;left:0;
      transform:translate(-50%,-50%);
      border-radius:50%;
      z-index:99998;
      pointer-events:none;
      mix-blend-mode:difference;
    }
    .cursor-dot{
      width:8px;height:8px;
      background:#fff;
    }
    .cursor-outline{
      width:40px;height:40px;
      border:2px solid rgba(255,255,255,0.5);
      transition:all .15s cubic-bezier(0.4,0,0.2,1);
    }

    .back-to-top{
      position:fixed;
      right:24px;bottom:100px;
      width:56px;height:56px;
      background:linear-gradient(135deg,var(--accent),var(--violet));
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#fff;
      font-size:1.2rem;
      cursor:pointer;
      opacity:0;
      visibility:hidden;
      transform:translateY(20px);
      transition:all .4s cubic-bezier(0.4,0,0.2,1);
      box-shadow:0 10px 40px rgba(255,51,102,0.4);
      z-index:999;
    }
    .back-to-top.visible{
      opacity:1;
      visibility:visible;
      transform:translateY(0);
    }
    .back-to-top:hover{
      transform:translateY(-5px) scale(1.1);
      box-shadow:0 15px 50px rgba(255,51,102,0.5);
    }

    .floating-actions{
      position:fixed;
      right:24px;
      bottom:24px;
      display:flex;
      flex-direction:column;
      gap:12px;
      z-index:998;
    }
    .fab{
      width:56px;height:56px;
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:1.4rem;
      cursor:pointer;
      box-shadow:0 10px 40px rgba(0,0,0,0.5);
      transition:all .3s cubic-bezier(0.4,0,0.2,1);
      border:none;
    }
    .fab:hover{transform:scale(1.1) translateY(-3px);}
    .fab-wa{background:#25D366;color:#fff;}
    .fab-mail{background:var(--aqua);color:#000;}
    .fab-ig{background:radial-gradient(circle at 30% 107%, #fdf497 0%, #fdf497 5%, #fd5949 45%, #d6249f 60%, #285AEB 90%);color:#fff;}

    .modal-backdrop{
      position:fixed;inset:0;
      background:rgba(0,0,0,0.9);
      backdrop-filter:blur(10px);
      z-index:99998;
      opacity:0;
      visibility:hidden;
      transition:all .4s;
    }
    .modal-backdrop.open{opacity:1;visibility:visible;}
    .modal-content{
      position:fixed;
      top:50%;left:50%;
      transform:translate(-50%,-50%) scale(0.95);
      z-index:99999;
      opacity:0;
      visibility:hidden;
      transition:all .4s cubic-bezier(0.4,0,0.2,1);
    }
    .modal-content.open{
      opacity:1;
      visibility:visible;
      transform:translate(-50%,-50%) scale(1);
    }

    .cart-sidebar{
      position:fixed;
      right:0;top:0;
      height:100%;
      width:100%;
      max-width:450px;
      background:linear-gradient(180deg,rgba(12,12,18,0.98),rgba(8,8,12,0.98));
      backdrop-filter:blur(30px);
      border-left:1px solid rgba(255,255,255,0.08);
      z-index:99999;
      transform:translateX(100%);
      transition:transform .5s cubic-bezier(0.4,0,0.2,1);
      display:flex;
      flex-direction:column;
    }
    .cart-sidebar.open{transform:translateX(0);}

    .kbd{
      background:rgba(255,255,255,0.1);
      padding:4px 10px;
      border-radius:6px;
      border:1px solid rgba(255,255,255,0.2);
      font-weight:700;
      font-size:.75rem;
    }

    .stock-indicator{
      display:flex;align-items:center;gap:6px;
      font-size:.75rem;
    }
    .stock-dot{
      width:8px;height:8px;
      border-radius:50%;
      animation:stockPulse 2s ease-in-out infinite;
    }
    .stock-dot.in-stock{background:var(--emerald);}
    .stock-dot.low-stock{background:var(--gold);}
    .stock-dot.out-stock{background:var(--accent);animation:none;}
    @keyframes stockPulse{
      0%,100%{opacity:1;}
      50%{opacity:0.5;}
    }

    .qty-selector{
      display:flex;
      align-items:center;
      background:rgba(255,255,255,0.05);
      border-radius:12px;
      border:1px solid rgba(255,255,255,0.1);
      overflow:hidden;
    }
    .qty-selector button{
      width:36px;height:36px;
      background:transparent;
      border:none;
      color:#fff;
      font-size:1.2rem;
      cursor:pointer;
      transition:background .2s;
    }
    .qty-selector button:hover{background:rgba(255,255,255,0.1);}
    .qty-selector span{
      width:40px;
      text-align:center;
      font-weight:700;
    }

    .free-shipping{
      display:inline-flex;
      align-items:center;
      gap:6px;
      background:linear-gradient(135deg,rgba(16,185,129,0.2),rgba(0,194,255,0.2));
      border:1px solid rgba(16,185,129,0.3);
      border-radius:8px;
      padding:6px 12px;
      font-size:.7rem;
      font-weight:600;
      color:#10B981;
    }

    .compare-btn{
      position:absolute;
      top:68px;right:16px;
      width:40px;height:40px;
      background:rgba(0,0,0,0.6);
      backdrop-filter:blur(10px);
      border-radius:50%;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:.9rem;
      color:#fff;
      border:1px solid rgba(255,255,255,0.1);
      cursor:pointer;
      z-index:10;
      opacity:0;
      transform:translateX(10px);
      transition:all .3s;
    }
    .product-card:hover .compare-btn{
      opacity:1;
      transform:translateX(0);
    }
    .compare-btn:hover{background:var(--aqua);color:#000;}

    @media (max-width:768px){
      .cursor-dot,.cursor-outline{display:none;}
      .product-card .card-image{height:220px;}
      .back-to-top{right:16px;bottom:150px;width:48px;height:48px;}
      .floating-actions{right:16px;bottom:16px;}
      .fab{width:48px;height:48px;}
    }

    @media (prefers-reduced-motion: reduce){
      *{animation-duration:0.01ms !important;transition-duration:0.01ms !important;}
    }
  </style>
</head>
<body class="antialiased">
  <a href="#home" class="skip-link">Skip to main content</a>
  
  <div class="cursor-dot hidden md:block" id="cursorDot"></div>
  <div class="cursor-outline hidden md:block" id="cursorOutline"></div>
  
  <div id="toastWrap" class="toast-wrap" aria-live="polite"></div>
  
  <div id="lightbox" class="lightbox" role="dialog" aria-hidden="true">
    <button class="nav left" id="lbPrev" aria-label="Previous">â€¹</button>
    <img id="lbImg" src="" alt="Product image">
    <button class="nav right" id="lbNext" aria-label="Next">â€º</button>
    <button class="absolute top-6 right-6 text-3xl text-white/70 hover:text-white" id="lbClose" aria-label="Close">Ã—</button>
  </div>
  
  <div class="loader-overlay fixed inset-0 bg-black z-[9999] flex items-center justify-center">
    <div class="text-center relative">
      <h1 class="text-7xl md:text-9xl font-bold font-serif italic opacity-0" id="loader-text-1">Flozen</h1>
      <h2 class="text-6xl md:text-9xl font-black text-brand-accent opacity-0 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2" id="loader-text-2">MR.10</h2>
    </div>
  </div>

  <nav id="main-nav" class="fixed top-0 w-full z-50 px-6 py-5" role="navigation">
    <div class="max-w-7xl mx-auto flex justify-between items-center">
      <div class="flex items-center gap-8">
        <a href="#home" class="text-3xl font-black tracking-tighter text-gradient">FLOZEN</a>
        <div class="hidden lg:flex gap-6 text-sm font-semibold tracking-wide uppercase">
          <a href="#home" class="hover:text-brand-accent transition-colors duration-300">Home</a>
          <a href="#products" class="hover:text-brand-accent transition-colors duration-300">Shop</a>
          <a href="#flash-sale" class="hover:text-brand-accent transition-colors duration-300 flex items-center gap-1">
            <span class="animate-pulse">ðŸ”¥</span> Sale
          </a>
          <a href="#trending" class="hover:text-brand-accent transition-colors duration-300">Trending</a>
          <button id="open-wishlist" class="hover:text-brand-accent transition-colors duration-300">Wishlist</button>
        </div>
      </div>
      <div class="flex items-center gap-4">
        <button id="voice-search-btn" class="p-2 hover:bg-white/10 rounded-full transition hidden md:flex" title="Voice Search" aria-label="Voice search">
          <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/></svg>
        </button>
        <button id="open-login" class="p-2 hover:bg:white/10 rounded-full transition" title="Account" aria-label="Account">
          <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><circle cx="12" cy="8" r="4" stroke-width="2"/><path d="M6 20v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2" stroke-width="2"/></svg>
        </button>
        <button id="open-cart" class="relative p-2 hover:bg:white/10 rounded-full transition" title="Cart" aria-label="Cart">
          <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path d="M3 3h2l.5 2M7 13h10l4-8H5.5" stroke-width="2"/><circle cx="9" cy="19" r="2" stroke-width="2"/><circle cx="17" cy="19" r="2" stroke-width="2"/></svg>
          <span id="cart-count" class="absolute -top-1 -right-1 bg-brand-accent text-white text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center hidden">0</span>
        </button>
        <a href="tel:+1234567890" class="hidden md:flex items-center gap-2 border border-white/30 px-5 py-2 rounded-full font-bold hover:bg:white hover:text:black transition-all duration-300">
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
          CALL NOW
        </a>
      </div>
    </div>
  </nav>

  <section id="home" class="relative min-h-screen flex items-center justify-center overflow-hidden">
    <div id="hero-bg-blur" class="absolute inset-0 opacity-0 transition-opacity duration-1000">
      <img src="https://images.unsplash.com/photo-1620760460330-0164c4149021?q=80&w=2070&auto=format&fit=crop" class="w-full h-full object-cover" style="filter:blur(30px) brightness(0.4);" alt="">
    </div>
    
    <div class="hero-bg-animated"></div>
    
    <img src="https://images.unsplash.com/photo-1620760460330-0164c4149021?q=80&w=2070&auto=format&fit=crop" class="absolute inset-0 w-full h-full object-cover opacity-30" alt="Premium gadgets">
    
    <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-transparent to-black"></div>
    <div class="absolute inset-0 bg-gradient-to-r from-black/40 via-transparent to-black/40"></div>
    
    <div class="relative z-10 text-center px-6 max-w-6xl mx-auto">
      <p class="text-brand-blue tracking-[0.6em] text-sm md:text-lg uppercase mb-4 hero-anim font-medium">The Ultimate Choice</p>
      <h1 class="text-7xl md:text-[12rem] font-black tracking-tighter hero-anim leading-none">FLOZEN</h1>
      <h2 class="text-4xl md:text-7xl font-serif italic text-gradient hero-anim -mt-4 md:-mt-8">by MR.10</h2>
      <p class="max-w-2xl mx-auto text-gray-300 text-lg md:text-xl mt-8 hero-anim leading-relaxed">Premium gadgets, streetwear & lifestyle products delivered worldwide with trust & speed.</p>
      
      <div class="flex flex-wrap justify-center gap-6 mt-8 hero-anim">
        <div class="flex items-center gap-2 text-sm text-gray-400">
          <svg class="w-5 h-5 text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
          100% Authentic
        </div>
        <div class="flex items-center gap-2 text-sm text-gray-400">
          <svg class="w-5 h-5 text-blue-500" fill="currentColor" viewBox="0 0 20 20"><path d="M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"/><path d="M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H10a1 1 0 001-1v-1h2a1 1 0 001-1v-3a1 1 0 00-.293-.707l-2-2A1 1 0 0011 7H9V5a1 1 0 00-1-1H3z"/></svg>
          Fast Shipping
        </div>
        <div class="flex items-center gap-2 text-sm text-gray-400">
          <svg class="w-5 h-5 text-yellow-500" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
          Top Rated
        </div>
      </div>
      
      <div class="mt-10 flex flex-col sm:flex-row gap-4 justify-center hero-anim">
        <a href="#products" class="btn-primary px-12 py-4 rounded-full text-lg uppercase tracking-widest">
          Shop Now
        </a>
        <button id="hero-chat-wa" class="flex items-center justify-center gap-3 px-8 py-4 rounded-full bg-[#25D366] hover:bg-[#20BD5A] text-white font-bold text-lg transition-all duration-300 hover:scale-105 shadow-lg shadow-green-500/30">
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M20.52 3.48A11.77 11.77 0 0012.04 0C5.53 0 .29 5.24.29 11.75c0 2.07.54 4.09 1.57 5.88L0 24l6.53-1.7a11.77 11.77 0 005.5 1.4h.01c6.51 0 11.75-5.24 11.75-11.75 0-3.14-1.22-6.09-3.27-8.17z"/></svg>
          WhatsApp
        </button>
        <button id="hero-chat-ig" class="flex items-center justify-center gap-3 px-8 py-4 rounded-full bg-gradient-to-r from-pink-500 via-red-500 to-yellow-500 text-white font-bold text-lg transition-all duration-300 hover:scale-105 shadow-lg shadow-pink-500/30">
          <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.2c3.2 0 3.584.012 4.85.07 1.17.054 1.97.24 2.43.403a4.9 4.9 0 011.77 1.15 4.9 4.9 0 011.15 1.77c.163.46.349 1.26.403 2.43.058 1.266.07 1.65.07 4.85s-.012 3.584-.07 4.85c-.054 1.17-.24 1.97-.403 2.43a4.9 4.9 0 01-1.15 1.77 4.9 4.9 0 01-1.77 1.15c-.46.163-1.26.349-2.43.403-1.266.058-1.65.07-4.85.07s-3.584-.012-4.85-.07c-1.17-.054-1.97-.24-2.43-.403a4.9 4.9 0 01-1.77-1.15 4.9 4.9 0 01-1.15-1.77c-.163-.46-.349-1.26-.403-2.43C2.212 15.784 2.2 15.4 2.2 12.2s.012-3.584.07-4.85c.054-1.17.24-1.97.403-2.43a4.9 4.9 0 011.15-1.77 4.9 4.9 0 011.77-1.15c.46-.163 1.26-.349 2.43-.403C8.416 2.212 8.8 2.2 12 2.2m0-2.2C8.735 0 8.332.014 7.052.072 5.773.13 4.897.322 4.158.6a7.1 7.1 0 00-2.6 1.69A7.1 7.1 0 00-.132 4.99C-.41 5.73-.602 6.605-.66 7.885-.718 9.165-.732 9.568-.732 12.833c0 3.265.014 3.668.072 4.948.058 1.28.25 2.155.528 2.895a7.1 7.1 0 001.69 2.6 7.1 7.1 0 002.6 1.69c.74.278 1.615.47 2.895.528 1.28.058 1.683.072 4.948.072s3.668-.014 4.948-.072c1.28-.058 2.155-.25 2.895-.528a7.1 7.1 0 002.6-1.69 7.1 7.1 0 001.69-2.6c.278-.74.47-1.615.528-2.895.058-1.28.072-1.683.072-4.948s-.014-3.668-.072-4.948c-.058-1.28-.25-2.155-.528-2.895a7.1 7.1 0 00-1.69-2.6A7.1 7.1 0 0019.842.6C19.102.322 18.227.13 16.947.072 15.667.014 15.265 0 12 0z"/></svg>
          Instagram
        </button>
        <button id="hero-chat-mail" class="flex items-center justify-center gap-3 px-8 py-4 rounded-full bg-brand-aqua hover:bg-sky-400 text-black font-bold text-lg transition-all duration-300 hover:scale-105 shadow-lg shadow-cyan-500/30">
          <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
          Email Us
        </button>
      </div>
    </div>
    
    <div class="absolute bottom-8 left-1/2 -translate-x-1/2 hero-anim">
      <div class="w-6 h-10 border-2 border-white/30 rounded-full flex justify-center">
        <div class="w-1.5 h-3 bg-white rounded-full mt-2 animate-bounce"></div>
      </div>
    </div>
  </section>

  <div class="bg-gradient-to-r from-brand-accent via-brand-purple to-brand-accent py-4 -rotate-1 z-20 relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent"></div>
    <div class="marquee-container overflow-hidden whitespace-nowrap">
      <div class="marquee-content text-white font-black text-2xl md:text-4xl uppercase tracking-wider">
        â˜… FLOZEN MR.10 â€¢ LIVE CHAT SUPPORT â€¢ LIMITED DROPS â€¢ WORLDWIDE SHIPPING â€¢ 100% AUTHENTIC â€¢ SECURE PAYMENT â˜… FLOZEN MR.10 â€¢ LIVE CHAT SUPPORT â€¢ LIMITED DROPS â€¢ WORLDWIDE SHIPPING â€¢ 100% AUTHENTIC â€¢ SECURE PAYMENT â˜…
      </div>
    </div>
  </div>

  <section id="flash-sale" class="py-16 px-6 md:px-12 relative overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-r from-brand-accent/10 via-transparent to-brand-purple/10"></div>
    <div class="max-w-7xl mx-auto relative">
      <div class="glass-strong rounded-3xl p-8 md:p-12">
        <div class="flex flex-col lg:flex-row items-center justify-between gap-8">
          <div>
            <div class="flex items-center gap-3 mb-4">
              <span class="text-4xl animate-pulse">âš¡</span>
              <h2 class="text-3xl md:text-5xl font-black text-gradient">Flash Sale</h2>
            </div>
            <p class="text-gray-300 text-lg mb-6">Hurry! Limited time offers on premium products</p>
            <div class="flash-timer" id="flashTimer">
              <div class="time-box"><div class="num" id="hours">00</div><div class="label">Hours</div></div>
              <div class="time-box"><div class="num" id="minutes">00</div><div class="label">Mins</div></div>
              <div class="time-box"><div class="num" id="seconds">00</div><div class="label">Secs</div></div>
            </div>
          </div>
          <div class="flex flex-col sm:flex-row gap-4">
            <a href="#products" class="btn-primary px-8 py-4 rounded-full text-lg">View Deals</a>
            <div class="free-shipping text-base px-6 py-3">
              <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/></svg>
              Free Shipping Over $50
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="py-8 px-6 overflow-x-auto">
    <div class="max-w-7xl mx-auto">
      <div class="flex gap-4 justify-start md:justify-center pb-2" id="category-pills">
        <button class="category-pill active" data-cat="">All Products</button>
      </div>
    </div>
  </section>

  <section id="products" class="py-16 px-6 md:px-12" aria-labelledby="products-heading">
    <div class="max-w-7xl mx-auto">
      <div class="section-header reveal">
        <h2 id="products-heading" class="section-title text-gradient">Featured Drops</h2>
        <p class="section-subtitle">Handpicked. Limited. Legendary. Chat with us anytime to confirm stock or bulk deals.</p>
      </div>
      
      <div class="glass-card rounded-2xl p-6 mb-10 reveal">
        <div class="flex flex-col lg:flex-row gap-4 items-stretch lg:items-center">
          <div class="flex-1 relative">
            <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
            <input id="search-input" type="search" placeholder="Search for products..." class="w-full bg-white/5 border border-white/10 rounded-xl pl-12 pr-4 py-3 text-white placeholder-gray-400 focus:border-brand-accent focus:ring-2 focus:ring-brand-accent/20 transition" aria-label="Search products">
          </div>
          <select id="category-filter" class="bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white appearance-none cursor-pointer min-w-[180px]" aria-label="Filter by category">
            <option value="">All Categories</option>
          </select>
          <select id="sort-select" class="bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white appearance-none cursor-pointer min-w-[180px]" aria-label="Sort products">
            <option value="">Sort By</option>
            <option value="price-asc">Price: Low â†’ High</option>
            <option value="price-desc">Price: High â†’ Low</option>
            <option value="title-asc">Title: A â†’ Z</option>
            <option value="title-desc">Title: Z â†’ A</option>
            <option value="rating-desc">Rating: High â†’ Low</option>
          </select>
        </div>
        <div class="flex flex-col md:flex-row gap-4 items-center justify-between mt-6 pt-6 border-t border-white/10">
          <div class="flex items-center gap-4 w-full md:w-auto">
            <label class="text-sm text-gray-400 whitespace-nowrap">Max Price</label>
            <input id="price-range" type="range" min="0" max="1000" step="1" class="flex-1 md:w-48 h-2 bg-white/10 rounded-lg appearance-none cursor-pointer accent-brand-accent">
            <span id="price-range-value" class="text-brand-aqua font-bold min-w-[60px]">$1000</span>
          </div>
          <div class="flex items-center gap-3 text-sm text-gray-400">
            <span class="kbd">/</span> Search
            <span class="kbd">W</span> Wishlist
            <span class="kbd">C</span> Cart
          </div>
        </div>
      </div>
      
      <div id="products-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8" aria-live="polite">
        <div class="product-card skeleton h-[450px]"></div>
        <div class="product-card skeleton h-[450px]"></div>
        <div class="product-card skeleton h-[450px]"></div>
        <div class="product-card skeleton h-[450px]"></div>
      </div>
      
      <div class="text-center mt-12 reveal">
        <button id="load-more-btn" class="btn-secondary px-10 py-4 rounded-full text-lg hidden">Load More Products</button>
      </div>
    </div>
  </section>

  <section id="recently-viewed" class="py-16 px-6 md:px-12 hidden">
    <div class="max-w-7xl mx-auto">
      <h3 class="text-2xl font-bold mb-6 text-gradient">Recently Viewed</h3>
      <div class="recently-viewed-scroll" id="recently-viewed-container"></div>
    </div>
  </section>

  <section class="py-24 px-6 relative overflow-hidden">
    <div class="absolute inset-0">
      <div class="absolute inset-0 bg-gradient-to-r from-brand-purple/20 via-brand-accent/10 to-brand-aqua/20"></div>
    </div>
    <div class="max-w-5xl mx-auto relative">
      <div class="glass-strong rounded-[40px] p-12 md:p-20 text-center reveal">
        <span class="inline-block px-4 py-2 rounded-full bg-white/10 text-sm font-semibold mb-6">âœ¨ Premium Experience</span>
        <h2 class="text-4xl md:text-6xl font-black mb-6 leading-tight">Ready to Own<br><span class="text-gradient">The Best?</span></h2>
        <p class="text-xl text-gray-300 mb-10 max-w-2xl mx-auto">Limited stock â€¢ Fastest delivery â€¢ 100% authentic products guaranteed</p>
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a href="https://wa.me/1234567890" target="_blank" class="inline-flex items-center justify-center gap-3 bg-[#25D366] text-white font-bold px-10 py-5 rounded-full text-lg hover:bg-[#20BD5A] transition-all duration-300 hover:scale-105 shadow-lg shadow-green-500/30">
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M20.52 3.48A11.77 11.77 0 0012.04 0C5.53 0 .29 5.24.29 11.75c0 2.07.54 4.09 1.57 5.88L0 24l6.53-1.7a11.77 11.77 0 005.5 1.4h.01c6.51 0 11.75-5.24 11.75-11.75 0-3.14-1.22-6.09-3.27-8.17z"/></svg>
            Chat on WhatsApp
          </a>
          <a href="tel:+1234567890" class="inline-flex items-center justify-center gap-3 bg-white text-black font-bold px-10 py-5 rounded-full text-lg hover:bg-brand-accent hover:text-white transition-all duration-300 hover:scale-105">
            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
            Call Now
          </a>
        </div>
      </div>
    </div>
  </section>

  <section class="py-16 px-6 md:px-12">
    <div class="max-w-3xl mx-auto text-center reveal">
      <h3 class="text-3xl md:text-4xl font-black mb-4">Get <span class="text-gradient">Exclusive</span> Drops</h3>
      <p class="text-gray-400 mb-8">Subscribe for early access, special offers, and new arrivals</p>
      <form id="newsletter-form" class="flex flex-col sm:flex-row gap-4 max-w-xl mx-auto">
        <input type="email" placeholder="Enter your email" class="flex-1 bg-white/5 border border-white/10 rounded-xl px-6 py-4 text-white placeholder-gray-400 focus:border-brand-accent transition" required>
        <button type="submit" class="btn-primary px-8 py-4 rounded-xl">Subscribe</button>
      </form>
    </div>
  </section>

  <footer class="footer-bg py-16 px-6 md:px-12">
    <div class="max-w-7xl mx-auto">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12">
        <div>
          <h4 class="text-2xl font-black text-gradient mb-4">FLOZEN</h4>
          <p class="text-gray-400 mb-6">Premium gadgets, streetwear & lifestyle products. Trusted worldwide since 2021.</p>
          <div class="flex gap-4">
            <a href="#" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-brand-accent transition">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/></svg>
            </a>
            <a href="#" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-brand-accent transition">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
            </a>
          </div>
        </div>
        <div>
          <h5 class="font-bold mb-4 text-white">Quick Links</h5>
          <ul class="space-y-3 text-gray-400">
            <li><a href="#home" class="hover:text-brand-accent transition">Home</a></li>
            <li><a href="#products" class="hover:text-brand-accent transition">Shop</a></li>
            <li><a href="#flash-sale" class="hover:text-brand-accent transition">Flash Sale</a></li>
            <li><button id="footer-orders" class="hover:text-brand-accent transition">My Orders</button></li>
          </ul>
        </div>
        <div>
          <h5 class="font-bold mb-4 text-white">Support</h5>
          <ul class="space-y-3 text-gray-400">
            <li><a href="https://wa.me/1234567890" target="_blank" class="hover:text-brand-accent transition">WhatsApp Chat</a></li>
            <li><a href="mailto:example@flozen.com" class="hover:text-brand-accent transition">Email Support</a></li>
            <li><a href="tel:+1234567890" class="hover:text-brand-accent transition">Call Us</a></li>
          </ul>
        </div>
        <div>
          <h5 class="font-bold mb-4 text-white">Contact</h5>
          <ul class="space-y-3 text-gray-400">
            <li class="flex items-center gap-2">
              <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
              +919902260316
            </li>
            <li class="flex items-center gap-2">
              <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
              gc7860010@gmail.com
            </li>
          </ul>
        </div>
      </div>
      <div class="border-t border-white/10 pt-8 text-center text-sm text-gray-500">
        <p>&copy; 2025 Flozen by MR.10. All rights reserved. Premium quality guaranteed.</p>
      </div>
    </div>
  </footer>

  <div class="floating-actions">
    <button class="fab fab-mail" id="fab-mail" title="Email Us">
      <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
    </button>
    <button class="fab fab-wa" id="fab-wa" title="WhatsApp">
      <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M20.52 3.48A11.77 11.77 0 0012.04 0C5.53 0 .29 5.24.29 11.75c0 2.07.54 4.09 1.57 5.88L0 24l6.53-1.7a11.77 11.77 0 005.5 1.4h.01c6.51 0 11.75-5.24 11.75-11.75 0-3.14-1.22-6.09-3.27-8.17z"/></svg>
    </button>
    <button class="fab fab-ig" id="fab-ig" title="Instagram DM">
      <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.2c3.2 0 3.584.012 4.85.07 1.17.054 1.97.24 2.43.403a4.9 4.9 0 011.77 1.15 4.9 4.9 0 011.15 1.77c.163.46.349 1.26.403 2.43.058 1.266.07 1.65.07 4.85s-.012 3.584-.07 4.85c-.054 1.17-.24 1.97-.403 2.43a4.9 4.9 0 01-1.15 1.77 4.9 4.9 0 01-1.77 1.15c-.46.163-1.26.349-2.43.403-1.266.058-1.65.07-4.85.07s-3.584-.012-4.85-.07c-1.17-.054-1.97-.24-2.43-.403a4.9 4.9 0 01-1.77-1.15 4.9 4.9 0 01-1.15-1.77c-.163-.46-.349-1.26-.403-2.43C2.212 15.784 2.2 15.4 2.2 12.2s.012-3.584.07-4.85c.054-1.17.24-1.97.403-2.43a4.9 4.9 0 011.15-1.77 4.9 4.9 0 011.77-1.15c.46-.163 1.26-.349 2.43-.403C8.416 2.212 8.8 2.2 12 2.2m0-2.2C8.735 0 8.332.014 7.052.072 5.773.13 4.897.322 4.158.6a7.1 7.1 0 00-2.6 1.69A7.1 7.1 0 00-.132 4.99C-.41 5.73-.602 6.605-.66 7.885-.718 9.165-.732 9.568-.732 12.833c0 3.265.014 3.668.072 4.948.058 1.28.25 2.155.528 2.895a7.1 7.1 0 001.69 2.6 7.1 7.1 0 002.6 1.69c.74.278 1.615.47 2.895.528 1.28.058 1.683.072 4.948.072s3.668-.014 4.948-.072c1.28-.058 2.155-.25 2.895-.528a7.1 7.1 0 002.6-1.69 7.1 7.1 0 001.69-2.6c.278-.74.47-1.615.528-2.895.058-1.28.072-1.683.072-4.948s-.014-3.668-.072-4.948c-.058-1.28-.25-2.155-.528-2.895a7.1 7.1 0 00-1.69-2.6A7.1 7.1 0 0019.842.6C19.102.322 18.227.13 16.947.072 15.667.014 15.265 0 12 0z"/></svg>
    </button>
  </div>

  <button id="backToTop" class="back-to-top" title="Back to top">
    <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"/></svg>
  </button>

  <div id="cart-overlay" class="fixed inset-0 bg-black/70 z-[99998] opacity-0 invisible transition-all duration-300"></div>
  <aside id="cart-sidebar" class="cart-sidebar" aria-label="Shopping cart">
    <div class="flex justify-between items-center p-6 border-b border-white/10">
      <h2 class="text-2xl font-black">Your Cart</h2>
      <button id="close-cart" class="w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-brand-accent transition" aria-label="Close cart">
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
      </button>
    </div>
    <div id="cart-list" class="flex-1 overflow-y-auto p-6"></div>
    <div class="p-6 border-t border-white/10 bg-black/40">
      <div class="flex items-center gap-3 mb-4">
        <input type="text" id="coupon-code" placeholder="Coupon code" class="flex-1 bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-400 text-sm">
        <button id="apply-coupon" class="btn-primary px-6 py-3 rounded-xl text-sm">Apply</button>
      </div>
      <div class="flex justify-between items-center text-lg font-bold mb-4">
        <span>Subtotal</span>
        <span id="cart-subtotal" class="text-gradient-gold">$0.00</span>
      </div>
      <button id="checkout-btn" class="w-full btn-primary py-4 rounded-xl text-lg font-bold">
        Proceed to Checkout
      </button>
    </div>
  </aside>

  <div id="login-modal" class="modal-backdrop" aria-hidden="true">
    <div class="modal-content w-full max-w-md mx-6">
      <div class="glass-strong rounded-3xl p-8">
        <button class="absolute top-4 right-4 w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition close-modal" aria-label="Close">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
        <h2 class="text-2xl font-black mb-6 text-gradient">Sign In</h2>
        <div id="profileView" class="hidden">
          <p class="text-gray-300 mb-4">Signed in as <span id="profileEmail" class="font-bold text-brand-accent"></span></p>
          <div class="flex gap-3">
            <button id="viewOrdersBtn" class="btn-primary px-6 py-3 rounded-xl">My Orders</button>
            <button id="logoutBtn" class="btn-secondary px-6 py-3 rounded-xl">Logout</button>
          </div>
        </div>
        <form id="login-form" class="space-y-4">
          <input type="email" id="user-email" required placeholder="Email address" class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-400">
          <input type="password" id="user-pass" required placeholder="Password" class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-400">
          <button type="submit" class="w-full btn-primary py-4 rounded-xl font-bold">Login / Register</button>
        </form>
      </div>
    </div>
  </div>

  <div id="wishlist-modal" class="modal-backdrop" aria-hidden="true">
    <div class="modal-content w-full max-w-2xl mx-6 max-h-[80vh] overflow-hidden">
      <div class="glass-strong rounded-3xl p-8 max-h-[80vh] overflow-y-auto">
        <button class="absolute top-4 right-4 w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition close-modal" aria-label="Close">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
        <h2 class="text-3xl font-black mb-6 text-gradient">Your Wishlist</h2>
        <div id="wishlist-list"></div>
      </div>
    </div>
  </div>

  <div id="orders-modal" class="modal-backdrop" aria-hidden="true">
    <div class="modal-content w-full max-w-3xl mx-6 max-h-[80vh] overflow-hidden">
      <div class="glass-strong rounded-3xl p-8 max-h-[80vh] overflow-y-auto">
        <button class="absolute top-4 right-4 w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition close-modal" aria-label="Close">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
        <h2 class="text-3xl font-black mb-6 text-gradient">My Orders</h2>
        <div id="orders-list"></div>
      </div>
    </div>
  </div>

  <div id="checkout-modal" class="modal-backdrop" aria-hidden="true">
    <div class="modal-content w-full max-w-3xl mx-6 max-h-[90vh] overflow-hidden">
      <div class="glass-strong rounded-3xl p-8 max-h-[90vh] overflow-y-auto">
        <button class="absolute top-4 right-4 w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition close-modal" aria-label="Close">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
        <h2 class="text-3xl font-black mb-6 text-gradient">Checkout</h2>
        <div id="checkout-items" class="space-y-4 mb-6"></div>
        <div class="space-y-4 mb-6">
          <input id="checkout-email" placeholder="Email address" class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-400">
          <input id="checkout-phone" placeholder="Phone number" class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-400">
          <input id="checkout-coupon" placeholder="Coupon code (FLO10, WELCOME5)" class="w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-gray-400">
        </div>
        <div class="flex justify-between items-center text-xl font-bold mb-6 p-4 bg-white/5 rounded-xl">
          <span>Total</span>
          <span id="checkout-total" class="text-gradient-gold">$0.00</span>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
          <button id="place-order" class="btn-primary py-4 rounded-xl font-bold">Place Order</button>
          <button id="order-whatsapp" class="flex items-center justify-center gap-2 bg-[#25D366] text-white py-4 rounded-xl font-bold hover:bg-[#20BD5A] transition">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M20.52 3.48A11.77 11.77 0 0012.04 0C5.53 0 .29 5.24.29 11.75c0 2.07.54 4.09 1.57 5.88L0 24l6.53-1.7a11.77 11.77 0 005.5 1.4h.01c6.51 0 11.75-5.24 11.75-11.75 0-3.14-1.22-6.09-3.27-8.17z"/></svg>
            WhatsApp
          </button>
          <button id="order-mail" class="flex items-center justify-center gap-2 bg-brand-aqua text-black py-4 rounded-xl font-bold hover:bg-sky-400 transition">
            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/></svg>
            Email
          </button>
        </div>
      </div>
    </div>
  </div>

  <div id="product-modal" class="modal-backdrop" aria-hidden="true">
    <div class="modal-content w-full max-w-5xl mx-6 max-h-[95vh] overflow-hidden">
      <div class="glass-strong rounded-3xl p-8 max-h-[95vh] overflow-y-auto">
        <button class="absolute top-4 right-4 w-12 h-12 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition close-modal z-10" aria-label="Close">
          <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
          <div class="relative">
            <img id="modal-img" src="" class="w-full rounded-2xl cursor-pointer hover:scale-105 transition-transform duration-500" alt="">
            <div class="absolute bottom-4 left-4 right-4 flex justify-center gap-2" id="modal-thumbnails"></div>
          </div>
          <div>
            <div class="free-shipping mb-4 inline-flex">
              <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/></svg>
              Free Shipping
            </div>
            <h2 id="modal-title" class="text-3xl md:text-4xl font-black mb-4"></h2>
            <div class="flex items-center gap-4 mb-4">
              <span id="modal-price" class="price-tag"></span>
              <div class="stars" id="modal-rating"></div>
            </div>
            <p id="modal-desc" class="text-gray-300 mb-6 leading-relaxed"></p>
            
            <div class="stock-indicator mb-6" id="modal-stock">
              <span class="stock-dot in-stock"></span>
              <span>In Stock - Ready to ship</span>
            </div>
            
            <div class="flex items-center gap-4 mb-6">
              <span class="text-gray-400">Quantity:</span>
              <div class="qty-selector">
                <button id="decr-qty">âˆ’</button>
                <span id="qty">1</span>
                <button id="incr-qty">+</button>
              </div>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8">
              <button id="modal-add-cart" class="btn-primary py-4 rounded-xl font-bold">Add to Cart</button>
              <button id="modal-buy-now" class="btn-secondary py-4 rounded-xl font-bold border-brand-accent text-brand-accent hover:bg-brand-accent hover:text-white">Buy Now (DM)</button>
            </div>
            
            <div class="grid grid-cols-3 gap-3">
              <button id="modal-whatsapp" class="flex items-center justify-center gap-2 bg-[#25D366] text-white py-3 rounded-xl font-bold hover:bg-[#20BD5A] transition text-xs">
                WA
              </button>
              <button id="modal-ig" class="flex items-center justify-center gap-2 bg-gradient-to-r from-pink-500 via-red-500 to-yellow-500 text-white py-3 rounded-xl font-bold hover:brightness-110 transition text-xs">
                IG
              </button>
              <button id="modal-gmail" class="flex items-center justify-center gap-2 bg-brand-aqua text-black py-3 rounded-xl font-bold hover:bg-sky-400 transition text-xs">
                Email
              </button>
            </div>
            
            <div class="mt-8 pt-8 border-t border-white/10">
              <h3 class="text-xl font-bold mb-4">Customer Reviews</h3>
              <div class="space-y-3">
                <div class="flex items-start gap-3 p-4 bg-white/5 rounded-xl">
                  <div class="w-10 h-10 rounded-full bg-gradient-to-br from-brand-accent to-brand-purple flex items-center justify-center font-bold">A</div>
                  <div>
                    <div class="flex items-center gap-2 mb-1">
                      <span class="font-bold">Ahmed K.</span>
                      <span class="text-yellow-400">â˜…â˜…â˜…â˜…â˜…</span>
                    </div>
                    <p class="text-sm text-gray-400">"Insane quality, fastest delivery ever!"</p>
                  </div>
                </div>
                <div class="flex items-start gap-3 p-4 bg-white/5 rounded-xl">
                  <div class="w-10 h-10 rounded-full bg-gradient-to-br from-brand-aqua to-brand-emerald flex items-center justify-center font-bold">F</div>
                  <div>
                    <div class="flex items-center gap-2 mb-1">
                      <span class="font-bold">Fatima S.</span>
                      <span class="text-yellow-400">â˜…â˜…â˜…â˜…â˜…</span>
                    </div>
                    <p class="text-sm text-gray-400">"100% original, worth every penny."</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="compare-modal" class="modal-backdrop" aria-hidden="true">
    <div class="modal-content w-full max-w-5xl mx-6 max-h-[90vh] overflow-hidden">
      <div class="glass-strong rounded-3xl p-8 max-h-[90vh] overflow-y-auto">
        <button class="absolute top-4 right-4 w-10 h-10 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition close-modal" aria-label="Close">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
        <h2 class="text-3xl font-black mb-6 text-gradient">Compare Products</h2>
        <div id="compare-list" class="grid grid-cols-2 md:grid-cols-3 gap-6"></div>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <script>
    gsap.registerPlugin(ScrollTrigger);

    const WHATSAPP_NUMBER = "1234567890"; // sample number
    const OWNER_EMAIL = "example@flozen.com";
    const INSTAGRAM_HANDLE = "flozen_store"; // sample handle
    const coupons = { 'FLO10': { type: 'percent', value: 10 }, 'WELCOME5': { type: 'fixed', value: 5 } };

    let allProducts = [];
    let wishlist = JSON.parse(localStorage.getItem('floz-wishlist') || '[]');
    let cart = JSON.parse(localStorage.getItem('floz-cart') || '{}');
    let orders = JSON.parse(localStorage.getItem('floz-orders') || '[]');
    let user = JSON.parse(localStorage.getItem('floz-user') || 'null');
    let compareList = JSON.parse(localStorage.getItem('floz-compare') || '[]');
    let recentlyViewed = JSON.parse(localStorage.getItem('floz-recent') || '[]');
    let currentModalQty = 1;
    let currentProduct = null;

    const cursorDot = document.getElementById('cursorDot');
    const cursorOutline = document.getElementById('cursorOutline');
    if (cursorDot && cursorOutline) {
      document.addEventListener('mousemove', e => {
        cursorDot.style.left = e.clientX + 'px';
        cursorDot.style.top = e.clientY + 'px';
        gsap.to(cursorOutline, { left: e.clientX, top: e.clientY, duration: 0.3 });
      });
      document.querySelectorAll('a, button, .product-card').forEach(el => {
        el.addEventListener('mouseenter', () => gsap.to(cursorOutline, { scale: 1.5, borderColor: 'var(--accent)' }));
        el.addEventListener('mouseleave', () => gsap.to(cursorOutline, { scale: 1, borderColor: 'rgba(255,255,255,0.5)' }));
      });
    }

    const tl = gsap.timeline();
    tl.to("#loader-text-1", { opacity: 1, y: -20, duration: 1 })
      .to("#loader-text-1", { opacity: 0, duration: 0.6, delay: 0.4 })
      .to("#loader-text-2", { opacity: 1, scale: 1.3, duration: 0.8, ease: "back.out(1.7)" })
      .to(".loader-overlay", { y: "-100%", duration: 1.2, ease: "power4.inOut", delay: 0.4 })
      .from(".hero-anim", { y: 100, opacity: 0, stagger: 0.2, duration: 1.2 }, "-=1")
      .to("#hero-bg-blur", { opacity: 0.6, duration: 1 }, "-=0.5");

    function updateFlashTimer() {
      const endTime = new Date();
      endTime.setHours(23, 59, 59, 999);
      const now = new Date();
      const diff = endTime - now;
      const hours = Math.floor(diff / (1000 * 60 * 60));
      const mins = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
      const secs = Math.floor((diff % (1000 * 60)) / 1000);
      document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
      document.getElementById('minutes').textContent = mins.toString().padStart(2, '0');
      document.getElementById('seconds').textContent = secs.toString().padStart(2, '0');
    }
    setInterval(updateFlashTimer, 1000);
    updateFlashTimer();

    function showToast(message, type = 'success') {
      const wrap = document.getElementById('toastWrap');
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      const icons = {
        success: '<svg class="w-5 h-5 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>',
        warn: '<svg class="w-5 h-5 text-yellow-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>',
        error: '<svg class="w-5 h-5 text-red-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>'
      };
      toast.innerHTML = `${icons[type] || icons.success}<span>${message}</span>`;
      wrap.appendChild(toast);
      setTimeout(() => {
        toast.style.transform = 'translateX(120%)';
        toast.style.opacity = '0';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    function escapeHtml(s) {
      return (s || '').replace(/[&<>"']/g, ch => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' }[ch]));
    }

    function updateCartCount() {
      const count = Object.values(cart).reduce((a, b) => a + b, 0);
      const cc = document.getElementById('cart-count');
      cc.textContent = count;
      cc.classList.toggle('hidden', !count);
    }
    updateCartCount();

    async function loadProducts() {
      try {
        const res = await fetch('https://fakestoreapi.com/products');
        allProducts = await res.json();
        populateCategoryDropdown();
        populateCategoryPills();
        const maxPrice = Math.ceil(Math.max(...allProducts.map(p => p.price)));
        const pr = document.getElementById('price-range');
        pr.max = Math.max(50, maxPrice);
        pr.value = pr.max;
        document.getElementById('price-range-value').textContent = '$' + pr.max;
        applyFilters();
      } catch (err) {
        console.error(err);
        document.getElementById('products-container').innerHTML = '<div class="col-span-full text-center py-20 text-gray-400">Failed to load products. Please try again later.</div>';
      }
    }

    function populateCategoryDropdown() {
      const catDropdown = document.getElementById('category-filter');
      const cats = [...new Set(allProducts.map(p => p.category))].filter(Boolean);
      catDropdown.innerHTML = '<option value="">All Categories</option>';
      cats.forEach(cat => {
        catDropdown.innerHTML += `<option value="${cat}">${cat.charAt(0).toUpperCase() + cat.slice(1)}</option>`;
      });
    }

    function populateCategoryPills() {
      const container = document.getElementById('category-pills');
      const cats = [...new Set(allProducts.map(p => p.category))].filter(Boolean);
      container.innerHTML = '<button class="category-pill active" data-cat="">All Products</button>';
      cats.forEach(cat => {
        container.innerHTML += `<button class="category-pill" data-cat="${cat}">${cat.charAt(0).toUpperCase() + cat.slice(1)}</button>`;
      });
      container.querySelectorAll('.category-pill').forEach(pill => {
        pill.addEventListener('click', () => {
          container.querySelectorAll('.category-pill').forEach(p => p.classList.remove('active'));
          pill.classList.add('active');
          document.getElementById('category-filter').value = pill.dataset.cat;
          applyFilters();
        });
      });
    }

    let filterDebounce = null;
    function applyFilters() {
      if (filterDebounce) clearTimeout(filterDebounce);
      filterDebounce = setTimeout(() => {
        const search = (document.getElementById('search-input').value || '').toLowerCase();
        const cat = document.getElementById('category-filter').value;
        const sort = document.getElementById('sort-select').value;
        const priceCap = Number(document.getElementById('price-range').value || 1000);

        let filtered = allProducts.filter(p =>
          (!search || p.title.toLowerCase().includes(search) || (p.description || '').toLowerCase().includes(search)) &&
          (!cat || p.category === cat) &&
          p.price <= priceCap
        );

        if (sort === 'price-asc') filtered.sort((a, b) => a.price - b.price);
        else if (sort === 'price-desc') filtered.sort((a, b) => b.price - a.price);
        else if (sort === 'title-asc') filtered.sort((a, b) => a.title.localeCompare(b.title));
        else if (sort === 'title-desc') filtered.sort((a, b) => b.title.localeCompare(a.title));
        else if (sort === 'rating-desc') filtered.sort((a, b) => (b.rating?.rate || 0) - (a.rating?.rate || 0));

        renderProducts(filtered);
      }, 150);
    }

    function renderProducts(products) {
      const container = document.getElementById('products-container');
      container.innerHTML = '';

      if (!products.length) {
        container.innerHTML = '<div class="col-span-full text-center py-20 text-gray-400 text-lg">No products found for these filters.</div>';
        return;
      }

      products.forEach((prod, idx) => {
        const liked = wishlist.includes(prod.id);
        const inCompare = compareList.includes(prod.id);
        const rating = prod.rating?.rate || 0;
        const ratingCount = prod.rating?.count || 0;
        const isHot = ratingCount > 200;
        const isNew = prod.id % 5 === 0;
        const isSale = prod.id % 3 === 0;

        let badge = '';
        if (isHot) badge = '<div class="badge-hot">ðŸ”¥ Hot</div>';
        else if (isSale) badge = '<div class="badge-hot badge-sale">Sale</div>';
        else if (isNew) badge = '<div class="badge-hot badge-new">New</div>';

        let stars = '';
        for (let i = 0; i < 5; i++) {
          stars += `<svg class="star ${i < Math.round(rating) ? '' : 'empty'}" viewBox="0 0 24 24" fill="${i < Math.round(rating) ? 'currentColor' : 'none'}" stroke="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>`;
        }

        const card = document.createElement('article');
        card.className = 'product-card reveal';
        card.style.animationDelay = `${idx * 0.05}s`;
        card.dataset.pid = prod.id;
        card.innerHTML = `
          ${badge}
          <button class="wishlist-btn ${liked ? 'loved' : ''}" data-pid="${prod.id}" aria-label="Add to wishlist">${liked ? 'â¤ï¸' : 'ðŸ¤'}</button>
          <button class="compare-btn ${inCompare ? 'active' : ''}" data-pid="${prod.id}" aria-label="Compare" title="Compare">âš–ï¸</button>
          <div class="card-image">
            <img src="${prod.image}" alt="${escapeHtml(prod.title)}" loading="lazy">
            <button class="quick-view-btn" data-pid="${prod.id}">Quick View</button>
          </div>
          <div class="p-6">
            <p class="text-xs text-gray-500 uppercase tracking-wider mb-2">${escapeHtml(prod.category)}</p>
            <h3 class="font-bold text-lg mb-2 line-clamp-2 hover:text-brand-accent transition">${escapeHtml(prod.title)}</h3>
            <div class="flex items-center gap-2 mb-3">
              <div class="stars">${stars}</div>
              <span class="text-xs text-gray-500">(${ratingCount})</span>
            </div>
            <div class="flex items-center justify-between mb-4">
              <span class="price-tag"><span class="currency">$</span>${prod.price.toFixed(2)}</span>
              ${isSale ? `<span class="old-price">$${(prod.price * 1.3).toFixed(2)}</span>` : ''}
            </div>
            <div class="flex flex-col gap-2">
              <button class="flex-1 btn-primary py-3 rounded-xl text-sm add-cart-btn" data-pid="${prod.id}">Add to Cart</button>
              <div class="grid grid-cols-3 gap-2 text-[11px] font-semibold">
                <button class="btn-secondary py-2 rounded-xl buy-wa-btn" data-pid="${prod.id}">Buy via WA</button>
                <button class="btn-secondary py-2 rounded-xl buy-ig-btn" data-pid="${prod.id}">Buy via IG</button>
                <button class="btn-secondary py-2 rounded-xl buy-mail-btn" data-pid="${prod.id}">Buy via Email</button>
              </div>
            </div>
          </div>
        `;
        container.appendChild(card);
      });

      container.querySelectorAll('.wishlist-btn').forEach(btn => {
        btn.addEventListener('click', e => {
          e.stopPropagation();
          const pid = +btn.dataset.pid;
          if (wishlist.includes(pid)) {
            wishlist = wishlist.filter(id => id !== pid);
            btn.classList.remove('loved');
            btn.textContent = 'ðŸ¤';
            showToast('Removed from wishlist', 'warn');
          } else {
            wishlist.push(pid);
            btn.classList.add('loved');
            btn.textContent = 'â¤ï¸';
            showToast('Added to wishlist!', 'success');
          }
          localStorage.setItem('floz-wishlist', JSON.stringify(wishlist));
        });
      });

      container.querySelectorAll('.compare-btn').forEach(btn => {
        btn.addEventListener('click', e => {
          e.stopPropagation();
          const pid = +btn.dataset.pid;
          if (compareList.includes(pid)) {
            compareList = compareList.filter(id => id !== pid);
            btn.classList.remove('active');
            showToast('Removed from compare', 'warn');
          } else if (compareList.length >= 3) {
            showToast('Max 3 products to compare', 'error');
          } else {
            compareList.push(pid);
            btn.classList.add('active');
            showToast('Added to compare!', 'success');
          }
          localStorage.setItem('floz-compare', JSON.stringify(compareList));
        });
      });

      container.querySelectorAll('.add-cart-btn').forEach(btn => {
        btn.addEventListener('click', e => {
          e.stopPropagation();
          const pid = btn.dataset.pid;
          cart[pid] = (cart[pid] || 0) + 1;
          localStorage.setItem('floz-cart', JSON.stringify(cart));
          updateCartCount();
          showToast('Added to cart!', 'success');
          btn.innerHTML = 'âœ“ Added';
          setTimeout(() => btn.innerHTML = 'Add to Cart', 1500);
        });
      });

      function dmText(prod) {
        return `Hi! I want to buy: ${prod.title} ($${prod.price.toFixed(2)})`;
      }

      container.querySelectorAll('.buy-wa-btn').forEach(btn => {
        btn.addEventListener('click', e => {
          e.stopPropagation();
          const prod = allProducts.find(p => p.id == btn.dataset.pid);
          if (!prod) return;
          const text = dmText(prod);
          window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(text)}`, '_blank');
        });
      });

      container.querySelectorAll('.buy-ig-btn').forEach(btn => {
        btn.addEventListener('click', e => {
          e.stopPropagation();
          const prod = allProducts.find(p => p.id == btn.dataset.pid);
          if (!prod) return;
          const text = dmText(prod);
          window.open(`https://instagram.com/direct/t/${INSTAGRAM_HANDLE}?text=${encodeURIComponent(text)}`, '_blank');
        });
      });

      container.querySelectorAll('.buy-mail-btn').forEach(btn => {
        btn.addEventListener('click', e => {
          e.stopPropagation();
          const prod = allProducts.find(p => p.id == btn.dataset.pid);
          if (!prod) return;
          const subject = `Buy Now: ${prod.title}`;
          const body = `Hi Flozen,\n\nI want to buy:\n${prod.title}\nPrice: $${prod.price.toFixed(2)}\n\nPlease send payment & shipping details.\n\nThanks!`;
          window.open(`mailto:${OWNER_EMAIL}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`, '_blank');
        });
      });

      container.querySelectorAll('.quick-view-btn').forEach(btn => {
        btn.addEventListener('click', e => {
          e.stopPropagation();
          const prod = allProducts.find(p => p.id == btn.dataset.pid);
          if (prod) openProductModal(prod);
        });
      });

      container.querySelectorAll('.product-card').forEach(card => {
        card.addEventListener('click', e => {
          if (e.target.closest('button')) return;
          const prod = allProducts.find(p => p.id == card.dataset.pid);
          if (prod) openProductModal(prod);
        });
      });

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
            observer.unobserve(entry.target);
          }
        });
      }, { threshold: 0.1 });
      container.querySelectorAll('.reveal').forEach(el => observer.observe(el));
    }

    function openProductModal(prod) {
      currentProduct = prod;
      currentModalQty = 1;

      if (!recentlyViewed.includes(prod.id)) {
        recentlyViewed.unshift(prod.id);
        if (recentlyViewed.length > 10) recentlyViewed.pop();
        localStorage.setItem('floz-recent', JSON.stringify(recentlyViewed));
        updateRecentlyViewed();
      }

      document.getElementById('modal-img').src = prod.image;
      document.getElementById('modal-title').textContent = prod.title;
      document.getElementById('modal-price').innerHTML = `<span class="currency">$</span>${prod.price.toFixed(2)}`;
      document.getElementById('modal-desc').textContent = prod.description || '';
      document.getElementById('qty').textContent = '1';

      const rating = prod.rating?.rate || 0;
      let stars = '';
      for (let i = 0; i < 5; i++) {
        stars += `<svg class="star ${i < Math.round(rating) ? '' : 'empty'}" viewBox="0 0 24 24" fill="${i < Math.round(rating) ? 'currentColor' : 'none'}" stroke="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>`;
      }
      stars += `<span class="text-sm text-gray-400 ml-2">(${prod.rating?.count || 0} reviews)</span>`;
      document.getElementById('modal-rating').innerHTML = stars;

      openModal('product-modal');
    }

    document.getElementById('incr-qty').addEventListener('click', () => {
      currentModalQty++;
      document.getElementById('qty').textContent = currentModalQty;
    });

    document.getElementById('decr-qty').addEventListener('click', () => {
      if (currentModalQty > 1) currentModalQty--;
      document.getElementById('qty').textContent = currentModalQty;
    });

    document.getElementById('modal-add-cart').addEventListener('click', () => {
      if (!currentProduct) return;
      cart[currentProduct.id] = (cart[currentProduct.id] || 0) + currentModalQty;
      localStorage.setItem('floz-cart', JSON.stringify(cart));
      updateCartCount();
      showToast(`Added ${currentModalQty} item(s) to cart!`, 'success');
    });

    document.getElementById('modal-buy-now').addEventListener('click', () => {
      if (!currentProduct) return;
      const text = `Hi! I want to buy now:\n\n${currentProduct.title}\nQty: ${currentModalQty}\nPrice: $${currentProduct.price.toFixed(2)} each`;
      window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(text)}`, '_blank');
    });

    document.getElementById('modal-whatsapp').addEventListener('click', () => {
      if (!currentProduct) return;
      const msg = `Hi! I want to order:\n\n${currentProduct.title}\nQty: ${currentModalQty}\nPrice: $${currentProduct.price.toFixed(2)} each\n\nPlease confirm availability.`;
      window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`, '_blank');
    });

    document.getElementById('modal-gmail').addEventListener('click', () => {
      if (!currentProduct) return;
      const subject = `Order Inquiry: ${currentProduct.title}`;
      const body = `Hi Flozen,\n\nI'm interested in ordering:\n\n${currentProduct.title}\nQty: ${currentModalQty}\nPrice: $${currentProduct.price.toFixed(2)} each\n\nPlease confirm availability.\n\nThank you!`;
      window.open(`mailto:${OWNER_EMAIL}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`, '_blank');
    });

    document.getElementById('modal-ig').addEventListener('click', () => {
      if (!currentProduct) return;
      const text = `Hi! I want to buy: ${currentProduct.title} (Qty: ${currentModalQty})`;
      window.open(`https://instagram.com/${INSTAGRAM_HANDLE}`, '_blank');
    });

    document.getElementById('modal-img').addEventListener('click', () => {
      if (currentProduct) openLightbox(currentProduct.image);
    });

    function updateRecentlyViewed() {
      const section = document.getElementById('recently-viewed');
      const container = document.getElementById('recently-viewed-container');
      if (!recentlyViewed.length) {
        section.classList.add('hidden');
        return;
      }
      section.classList.remove('hidden');
      container.innerHTML = '';
      recentlyViewed.forEach(pid => {
        const prod = allProducts.find(p => p.id === pid);
        if (!prod) return;
        container.innerHTML += `
          <div class="recently-viewed-item glass-card rounded-xl p-4 cursor-pointer hover:border-brand-accent transition" data-pid="${prod.id}">
            <img src="${prod.image}" class="w-full h-32 object-contain mb-3" alt="${escapeHtml(prod.title)}">
            <h4 class="text-sm font-bold line-clamp-2">${escapeHtml(prod.title)}</h4>
            <p class="text-brand-accent font-bold mt-2">$${prod.price.toFixed(2)}</p>
          </div>
        `;
      });
      container.querySelectorAll('.recently-viewed-item').forEach(item => {
        item.addEventListener('click', () => {
          const prod = allProducts.find(p => p.id == item.dataset.pid);
          if (prod) openProductModal(prod);
        });
      });
    }

    document.getElementById('open-cart').addEventListener('click', showCart);
    document.getElementById('close-cart').addEventListener('click', closeCart);
    document.getElementById('cart-overlay').addEventListener('click', closeCart);

    function showCart() {
      renderCart();
      document.getElementById('cart-sidebar').classList.add('open');
      document.getElementById('cart-overlay').classList.add('opacity-100', 'visible');
      document.getElementById('cart-overlay').classList.remove('opacity-0', 'invisible');
    }

    function closeCart() {
      document.getElementById('cart-sidebar').classList.remove('open');
      document.getElementById('cart-overlay').classList.remove('opacity-100', 'visible');
      document.getElementById('cart-overlay').classList.add('opacity-0', 'invisible');
    }

    function renderCart() {
      const container = document.getElementById('cart-list');
      let total = 0;
      container.innerHTML = '';

      if (!Object.keys(cart).length) {
        container.innerHTML = '<div class="text-center py-12 text-gray-400"><p class="text-5xl mb-4">ðŸ›’</p><p>Your cart is empty</p></div>';
        document.getElementById('cart-subtotal').textContent = '$0.00';
        return;
      }

      Object.keys(cart).forEach(pid => {
        const prod = allProducts.find(p => p.id == pid);
        if (!prod) return;
        const qty = cart[pid];
        const subtotal = prod.price * qty;
        total += subtotal;

        container.innerHTML += `
          <div class="flex gap-4 p-4 bg-white/5 rounded-xl mb-3">
            <img src="${prod.image}" class="w-20 h-20 object-contain rounded-lg bg-white/10 p-2" alt="">
            <div class="flex-1">
              <h4 class="font-bold text-sm line-clamp-2 mb-2">${escapeHtml(prod.title)}</h4>
              <div class="flex items-center justify-between">
                <div class="qty-selector text-sm">
                  <button onclick="updateQty(${prod.id}, -1)">âˆ’</button>
                  <span>${qty}</span>
                  <button onclick="updateQty(${prod.id}, 1)">+</button>
                </div>
                <span class="font-bold text-brand-accent">$${subtotal.toFixed(2)}</span>
              </div>
            </div>
            <button onclick="removeFromCart(${prod.id})" class="text-gray-400 hover:text-red-400 transition self-start">
              <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>
            </button>
          </div>
        `;
      });

      document.getElementById('cart-subtotal').textContent = `$${total.toFixed(2)}`;
    }

    window.updateQty = function(pid, delta) {
      if (cart[pid]) {
        cart[pid] = Math.max(1, cart[pid] + delta);
        localStorage.setItem('floz-cart', JSON.stringify(cart));
        renderCart();
        updateCartCount();
      }
    };

    window.removeFromCart = function(pid) {
      delete cart[pid];
      localStorage.setItem('floz-cart', JSON.stringify(cart));
      renderCart();
      updateCartCount();
      showToast('Removed from cart', 'warn');
    };

    document.getElementById('apply-coupon').addEventListener('click', () => {
      const code = document.getElementById('coupon-code').value.trim().toUpperCase();
      if (!code || !coupons[code]) {
        showToast('Invalid coupon code', 'error');
        return;
      }
      showToast('Coupon applied!', 'success');
    });

    document.getElementById('checkout-btn').addEventListener('click', () => {
      closeCart();
      openCheckout();
    });

    function openCheckout() {
      const container = document.getElementById('checkout-items');
      container.innerHTML = '';
      let total = 0;

      Object.keys(cart).forEach(pid => {
        const prod = allProducts.find(p => p.id == pid);
        if (!prod) return;
        const qty = cart[pid];
        const subtotal = prod.price * qty;
        total += subtotal;
        container.innerHTML += `
          <div class="flex justify-between items-center p-3 bg-white/5 rounded-xl">
            <div class="flex items-center gap-3">
              <img src="${prod.image}" class="w-12 h-12 object-contain rounded-lg bg-white/10 p-1">
              <div>
                <p class="font-bold text-sm">${escapeHtml(prod.title.split(' ').slice(0, 4).join(' '))}...</p>
                <p class="text-xs text-gray-400">Qty: ${qty}</p>
              </div>
            </div>
            <span class="font-bold">$${subtotal.toFixed(2)}</span>
          </div>
        `;
      });

      document.getElementById('checkout-total').textContent = `$${total.toFixed(2)}`;
      document.getElementById('checkout-email').value = user?.email || '';
      openModal('checkout-modal');
    }

    document.getElementById('place-order').addEventListener('click', () => placeOrder());
    document.getElementById('order-whatsapp').addEventListener('click', () => placeOrder('wa'));
    document.getElementById('order-mail').addEventListener('click', () => placeOrder('mail'));

    function placeOrder(channel) {
      const items = [];
      let subtotal = 0;

      Object.keys(cart).forEach(pid => {
        const prod = allProducts.find(p => p.id == pid);
        if (!prod) return;
        items.push({ id: prod.id, title: prod.title, qty: cart[pid], rate: prod.price });
        subtotal += prod.price * cart[pid];
      });

      if (!items.length) {
        showToast('Cart is empty', 'error');
        return;
      }

      const email = document.getElementById('checkout-email').value.trim();
      const phone = document.getElementById('checkout-phone').value.trim();
      const coupon = document.getElementById('checkout-coupon').value.trim().toUpperCase();

      let total = subtotal;
      if (coupons[coupon]) {
        const c = coupons[coupon];
        if (c.type === 'percent') total = subtotal * (1 - c.value / 100);
        else total = Math.max(0, subtotal - c.value);
      }

      const order = {
        id: 'ORD' + Date.now(),
        items,
        subtotal,
        total,
        email,
        phone,
        coupon,
        created_at: new Date().toISOString()
      };

      orders.unshift(order);
      localStorage.setItem('floz-orders', JSON.stringify(orders));

      if (email) {
        user = { email };
        localStorage.setItem('floz-user', JSON.stringify(user));
      }

      cart = {};
      localStorage.setItem('floz-cart', JSON.stringify(cart));
      updateCartCount();

      closeAllModals();
      showToast('Order placed successfully!', 'success');

      const summary = `Order: ${order.id}\n\nItems:\n${items.map(i => `- ${i.title} x${i.qty} @ $${i.rate}`).join('\n')}\n\nTotal: $${order.total.toFixed(2)}\nEmail: ${email || 'N/A'}\nPhone: ${phone || 'N/A'}`;

      if (channel === 'wa') {
        window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(summary)}`, '_blank');
      } else if (channel === 'mail') {
        window.open(`mailto:${OWNER_EMAIL}?subject=${encodeURIComponent('Order ' + order.id)}&body=${encodeURIComponent(summary)}`, '_blank');
      }
    }

    function openModal(id) {
      const modal = document.getElementById(id);
      modal.classList.add('open');
      modal.setAttribute('aria-hidden', 'false');
      const content = modal.querySelector('.modal-content');
      if (content) content.classList.add('open');
      document.body.style.overflow = 'hidden';
    }

    function closeAllModals() {
      document.querySelectorAll('.modal-backdrop').forEach(m => {
        m.classList.remove('open');
        m.setAttribute('aria-hidden', 'true');
        const content = m.querySelector('.modal-content');
        if (content) content.classList.remove('open');
      });
      document.body.style.overflow = '';
    }

    document.querySelectorAll('.close-modal').forEach(btn => {
      btn.addEventListener('click', closeAllModals);
    });

    document.querySelectorAll('.modal-backdrop').forEach(modal => {
      modal.addEventListener('click', e => {
        if (e.target === modal) closeAllModals();
      });
    });

    document.getElementById('open-wishlist').addEventListener('click', e => {
      e.preventDefault();
      updateWishlistModal();
      openModal('wishlist-modal');
    });

    function updateWishlistModal() {
      const container = document.getElementById('wishlist-list');
      if (!wishlist.length) {
        container.innerHTML = '<div class="text-center py-12 text-gray-400"><p class="text-5xl mb-4">ðŸ’”</p><p>Your wishlist is empty</p></div>';
        return;
      }
      container.innerHTML = '';
      wishlist.forEach(pid => {
        const prod = allProducts.find(p => p.id === pid);
        if (!prod) return;
        container.innerHTML += `
          <div class="flex gap-4 p-4 bg-white/5 rounded-xl mb-3">
            <img src="${prod.image}" class="w-20 h-20 object-contain rounded-lg bg-white/10 p-2">
            <div class="flex-1">
              <h4 class="font-bold mb-2">${escapeHtml(prod.title)}</h4>
              <p class="text-brand-accent font-bold">$${prod.price.toFixed(2)}</p>
            </div>
            <div class="flex flex-col gap-2">
              <button class="btn-primary px-4 py-2 rounded-lg text-sm" onclick="addToCartFromWishlist(${prod.id})">Add to Cart</button>
              <button class="btn-secondary px-4 py-2 rounded-lg text-sm" onclick="removeFromWishlist(${prod.id})">Remove</button>
            </div>
          </div>
        `;
      });
    }

    window.addToCartFromWishlist = function(pid) {
      cart[pid] = (cart[pid] || 0) + 1;
      localStorage.setItem('floz-cart', JSON.stringify(cart));
      updateCartCount();
      showToast('Added to cart!', 'success');
    };

    window.removeFromWishlist = function(pid) {
      wishlist = wishlist.filter(id => id !== pid);
      localStorage.setItem('floz-wishlist', JSON.stringify(wishlist));
      updateWishlistModal();
      applyFilters();
      showToast('Removed from wishlist', 'warn');
    };

    document.getElementById('open-login').addEventListener('click', () => {
      if (user) {
        document.getElementById('login-form').classList.add('hidden');
        document.getElementById('profileView').classList.remove('hidden');
        document.getElementById('profileEmail').textContent = user.email;
      } else {
        document.getElementById('login-form').classList.remove('hidden');
        document.getElementById('profileView').classList.add('hidden');
      }
      openModal('login-modal');
    });

    document.getElementById('login-form').addEventListener('submit', e => {
      e.preventDefault();
      const email = document.getElementById('user-email').value.trim();
      user = { email };
      localStorage.setItem('floz-user', JSON.stringify(user));
      closeAllModals();
      showToast('Logged in successfully!', 'success');
    });

    document.getElementById('logoutBtn')?.addEventListener('click', () => {
      user = null;
      localStorage.setItem('floz-user', 'null');
      closeAllModals();
      showToast('Logged out', 'warn');
    });

    document.getElementById('viewOrdersBtn')?.addEventListener('click', () => {
      closeAllModals();
      updateOrdersModal();
      openModal('orders-modal');
    });

    document.getElementById('footer-orders')?.addEventListener('click', () => {
      updateOrdersModal();
      openModal('orders-modal');
    });

    function updateOrdersModal() {
      const container = document.getElementById('orders-list');
      if (!orders.length) {
        container.innerHTML = '<div class="text-center py-12 text-gray-400"><p class="text-5xl mb-4">ðŸ“¦</p><p>No orders yet</p></div>';
        return;
      }
      container.innerHTML = orders.map(o => `
        <div class="p-4 bg-white/5 rounded-xl mb-3">
          <div class="flex justify-between items-start mb-3">
            <div>
              <p class="font-bold text-brand-accent">${o.id}</p>
              <p class="text-xs text-gray-400">${new Date(o.created_at).toLocaleString()}</p>
            </div>
            <span class="font-bold text-lg">$${o.total.toFixed(2)}</span>
          </div>
          <p class="text-sm text-gray-300">${o.items.map(i => `${escapeHtml(i.title.split(' ').slice(0, 3).join(' '))} x${i.qty}`).join(', ')}</p>
        </div>
      `).join('');
    }

    const lightbox = document.getElementById('lightbox');
    const lbImg = document.getElementById('lbImg');
    let lbList = [], lbIndex = 0;

    function openLightbox(src) {
      lbList = Array.from(document.querySelectorAll('#products-container img')).map(img => img.src);
      if (currentProduct) lbList = [currentProduct.image];
      lbIndex = lbList.indexOf(src);
      if (lbIndex < 0) lbIndex = 0;
      lbImg.src = lbList[lbIndex];
      lightbox.classList.add('open');
      document.body.style.overflow = 'hidden';
    }

    function closeLightbox() {
      lightbox.classList.remove('open');
      document.body.style.overflow = '';
    }

    document.getElementById('lbPrev').addEventListener('click', () => {
      lbIndex = (lbIndex - 1 + lbList.length) % lbList.length;
      lbImg.src = lbList[lbIndex];
    });

    document.getElementById('lbNext').addEventListener('click', () => {
      lbIndex = (lbIndex + 1) % lbList.length;
      lbImg.src = lbList[lbIndex];
    });

    document.getElementById('lbClose').addEventListener('click', closeLightbox);
    lightbox.addEventListener('click', e => {
      if (e.target === lightbox) closeLightbox();
    });

    const backToTop = document.getElementById('backToTop');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 500) {
        backToTop.classList.add('visible');
      } else {
        backToTop.classList.remove('visible');
      }
    }, { passive: true });

    backToTop.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    const nav = document.getElementById('main-nav');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        nav.classList.add('scrolled');
      } else {
        nav.classList.remove('scrolled');
      }
    }, { passive: true });

    document.getElementById('fab-wa').addEventListener('click', () => {
      window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent('Hello Flozen! I need help with my shopping.')}`, '_blank');
    });

    document.getElementById('fab-mail').addEventListener('click', () => {
      window.open(`mailto:${OWNER_EMAIL}?subject=${encodeURIComponent('Help Request - Flozen')}&body=${encodeURIComponent('Hi Flozen,\n\nI need assistance with...')}`,'_blank');
    });

    document.getElementById('fab-ig').addEventListener('click', () => {
      window.open(`https://instagram.com/${INSTAGRAM_HANDLE}`, '_blank');
    });

    document.getElementById('hero-chat-wa').addEventListener('click', () => {
      window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent('Hello Flozen! I want to explore your latest drops.')}`, '_blank');
    });

    document.getElementById('hero-chat-ig').addEventListener('click', () => {
      window.open(`https://instagram.com/${INSTAGRAM_HANDLE}`, '_blank');
    });

    document.getElementById('hero-chat-mail').addEventListener('click', () => {
      window.open(`mailto:${OWNER_EMAIL}?subject=${encodeURIComponent('Product Inquiry - Flozen')}&body=${encodeURIComponent('Hi Flozen,\n\nI would like to know more about your products.')}`, '_blank');
    });

    document.getElementById('newsletter-form').addEventListener('submit', e => {
      e.preventDefault();
      showToast('Subscribed successfully!', 'success');
      e.target.reset();
    });

    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') {
        closeAllModals();
        closeLightbox();
        closeCart();
      }
      if (document.activeElement.tagName === 'INPUT' || document.activeElement.tagName === 'TEXTAREA') return;
      if (e.key === '/') {
        e.preventDefault();
        document.getElementById('search-input').focus();
      }
      if (e.key.toLowerCase() === 'w') {
        e.preventDefault();
        updateWishlistModal();
        openModal('wishlist-modal');
      }
      if (e.key.toLowerCase() === 'c') {
        e.preventDefault();
        showCart();
      }
    });

    const revealObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          revealObserver.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

    document.querySelectorAll('.reveal').forEach(el => revealObserver.observe(el));

    document.addEventListener('DOMContentLoaded', () => {
      ['search-input', 'category-filter', 'sort-select'].forEach(id => {
        document.getElementById(id).addEventListener('input', applyFilters);
      });
      document.getElementById('price-range').addEventListener('input', e => {
        document.getElementById('price-range-value').textContent = '$' + e.target.value;
        applyFilters();
      });
      loadProducts();
      updateRecentlyViewed();
    });
  </script>
</body>

</html>
